
CephFS 尝鲜
===========

本篇是给富有冒险精神的 CephFS 尝鲜人的一个指导。当前，构建洗刷和灾难恢复工\
具的工作还在进行，对于在生产环境下运行 CephFS 来说这是必需的，然而对于社区\
成员的试用、缺陷报告和反馈来说，已经比较实用了。


安装指导
========

指导文档见 :doc:`/cephfs/index` 。


最稳定的配置
============

为了营造一个“健康快乐”的文件系统，要使用\ **单个活跃 MDS** 并且\ \
**不要用快照功能**\ ，这两条都是默认的：

* 快照默认是禁用的，除非管理员通过 ``allow_new_snaps`` 选项明确打开了。
* Ceph 默认会使用单个活跃 MDS ，除非管理员明确设置了大于 1 的 ``max_mds`` \
  值。需要注意的是，创建额外的 MDS 守护进程（比如用 \
  ``ceph-deploy mds create`` 命令）完全没问题，因为它们默认处于热备状态。\
  启用 standby-replay 模式也是很安全的。


用哪个客户端
============

fuse 客户端最容易与服务器做到代码级的同步，但是内核客户端的性能通常更好。

这两种客户端不一定会提供一样的功能，如 fuse 客户端可支持客户端强制配额，\
但内核客户端却不支持。

遇到缺陷或性能问题时，最好试试另一个客户端，以甄别此缺陷是否特定于客户端\
（然后报告给开发者）。


报告问题
========

如果你确信发现了问题，报告时请附带尽可能多的信息，特别是重要信息：

* 客户端和服务器所安装的 Ceph 版本；
* 你在用内核、还是用户空间客户端；
* 如果你在用内核客户端，是什么版本？
* 有多少个客户端在用？什么样的负载？
* 如果某个系统“卡住”了，它影响所有客户端呢还是只影响一个？
* 关于 Ceph 的健康状况消息；
* 崩溃时写入日志的回调栈。

如果你觉得自己发现了一个缺陷，请提交到 http://tracker.ceph.com 。一般问题\
的话可以在 ceph-users 邮件列表询问。

