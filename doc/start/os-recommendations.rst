==============
 推薦作業系統
==============

Ceph 相依
=========

按常规来说，我们建议在较新的 Linux 发行版上部署 Ceph ；同样，要选择长期支持的\
版本。


Linux 内核
----------

- **Ceph 内核态客户端**

  当前我们推荐：

  - v3.16.3 or later (rbd deadlock regression in v3.16.[0-2])
  - *NOT* v3.15.* (rbd deadlock regression)
  - v3.14.*
  - v3.10.*

  如果您坚持用很旧的，可以考虑这些：

  - v3.6.6 or later in the v3.6 stable series
  - v3.4.20 or later in the v3.4 stable series

  firefly (CRUSH_TUNABLES3) 这个版本的可调选项到 v3.15 才开始支持。详情见 \
  `CRUSH 可调值`_ 。

- **btrfs**

  如果您想在 ``btrfs`` 上运行 Ceph ，我们推荐使用一个最新的 Linux 内核（ \
  v3.14 或更新）。


glibc
-----

- **fdatasync(2)**: 从Firefly v0.80起，用 ``fdatasync(2)`` 取代 ``fsync(2)`` \
  可提升性能。

- **syncfs(2)**: 对非btrfs文件系统（像XFS和ext4）而言，在一台服务器上运行了多\
  个 ``ceph-osd`` 守护进程时， Ceph 使用 ``syncfs(2)`` 系统调用时效率高得多\
  （此功能在 2.6.39 内核和 glibc-2.14 加入）。新版的 Ceph （ v0.55 及以上）不\
  依赖 glibc 支持。


系统平台
========

下面的表格展示了 Ceph 需求和各种 Linux 发行版的对应关系。一般来说， Ceph 对内\
核和系统初始化阶段的依赖很少（如 sysvinit 、 upstart 、 systemd ）。


Firefly (0.80)
--------------

+----------+----------+--------------------+--------------+---------+------------+
| Distro   | Release  | Code Name          | Kernel       | Notes   | Testing    |
+==========+==========+====================+==============+=========+============+
| CentOS   | 6        | N/A                | linux-2.6.32 | 1, 2    | B, I       |
+----------+----------+--------------------+--------------+---------+------------+
| CentOS   | 7        |                    | linux-3.10.0 |         | B          |
+----------+----------+--------------------+--------------+---------+------------+
| Debian   | 6.0      | Squeeze            | linux-2.6.32 | 1, 2, 3 | B          |
+----------+----------+--------------------+--------------+---------+------------+
| Debian   | 7.0      | Wheezy             | linux-3.2.0  | 1, 2    | B          |
+----------+----------+--------------------+--------------+---------+------------+
| Fedora   | 19       | Schrödinger's Cat  | linux-3.10.0 |         | B          |
+----------+----------+--------------------+--------------+---------+------------+
| Fedora   | 20       | Heisenbug          | linux-3.14.0 |         | B          |
+----------+----------+--------------------+--------------+---------+------------+
| RHEL     | 6        |                    | linux-2.6.32 | 1, 2    | B, I, C    |
+----------+----------+--------------------+--------------+---------+------------+
| RHEL     | 7        |                    | linux-3.10.0 |         | B, I, C    |
+----------+----------+--------------------+--------------+---------+------------+
| Ubuntu   | 12.04    | Precise Pangolin   | linux-3.2.0  | 1, 2    | B, I, C    |
+----------+----------+--------------------+--------------+---------+------------+
| Ubuntu   | 14.04    | Trusty Tahr        | linux-3.13.0 |         | B, I, C    |
+----------+----------+--------------------+--------------+---------+------------+

**NOTE**: Ceph也支持 ``Quantal`` 、 ``Raring`` 和 ``Saucy``\ ，但我们推荐用长期\
支持版（LTS）。



Emperor (0.72)
--------------

Ceph Emperor 发布，版本号为 0.72 ，已不再支持，还在使用它的用户应该升级到 \
Firefly （版本 0.80 ）。


Dumpling (0.67)
---------------

+----------+----------+--------------------+--------------+---------+------------+
| Distro   | Release  | Code Name          | Kernel       | Notes   | Testing    |
+==========+==========+====================+==============+=========+============+
| CentOS   | 6.3      | N/A                | linux-2.6.32 | 1, 2    | B, I       |
+----------+----------+--------------------+--------------+---------+------------+
| Debian   | 6.0      | Squeeze            | linux-2.6.32 | 1, 2, 3 | B          |
+----------+----------+--------------------+--------------+---------+------------+
| Debian   | 7.0      | Wheezy             | linux-3.2.0  | 1, 2    | B          |
+----------+----------+--------------------+--------------+---------+------------+
| Fedora   | 18       | Spherical Cow      | linux-3.6.0  |         | B          |
+----------+----------+--------------------+--------------+---------+------------+
| Fedora   | 19       | Schrödinger's Cat  | linux-3.10.0 |         | B          |
+----------+----------+--------------------+--------------+---------+------------+
| OpenSuse | 12.2     | N/A                | linux-3.4.0  | 2       | B          |
+----------+----------+--------------------+--------------+---------+------------+
| RHEL     | 6.3      |                    | linux-2.6.32 | 1, 2    | B, I       |
+----------+----------+--------------------+--------------+---------+------------+
| Ubuntu   | 12.04    | Precise Pangolin   | linux-3.2.0  | 1, 2    | B, I, C    |
+----------+----------+--------------------+--------------+---------+------------+
| Ubuntu   | 12.10    | Quantal Quetzal    | linux-3.5.4  | 2       | B          |
+----------+----------+--------------------+--------------+---------+------------+
| Ubuntu   | 13.04    | Raring Ringtail    | linux-3.8.5  |         | B          |
+----------+----------+--------------------+--------------+---------+------------+


Argonaut (0.48), Bobtail (0.56), 和 Cuttlefish (0.61)
-----------------------------------------------------

Ceph 的 Argonaut 、 Bobtail 和 Cuttlefish 发布已不再支持，用户应该更新到最新\
稳定版（ Dumpling 或 Firefly ）。


附注
----

- **1**: 默认内核 ``btrfs`` 版本较老，不推荐用于 ``ceph-osd`` 存储节点；要升\
  级到推荐的内核，或者改用 ``xfs`` 、 ``ext4`` 。

- **2**: 默认内核带的 Ceph 客户端较老，不推荐做内核空间客户端（内核 RBD 或 \
  Ceph 文件系统），请升级到推荐内核。

- **3**: 默认内核或已安装的 ``glibc`` 版本若不支持 ``syncfs(2)`` 系统调用，同\
  一台机器上使用 ``xfs`` 或 ``ext4`` 的 ``ceph-osd`` 守护进程性能不会如愿。


测试版
------

- **B**: 我们会为此平台构建发布包。对其中的某些平台，可能也会持续地编译所有分\
  支、做基本单元测试。

- **I**: 我们在这个平台上做基本的安装和功能测试。

- **C**: 我们在这个平台上持续地做全面的功能、退化、压力测试，包括开发分支、预\
  发布版本、正式发布版本。

.. _CRUSH 可调值: ../../rados/operations/crush-map#tunables
